<?php
$images = [
    // Column 1
    ["src" => "../images/pages/gallery/DHI-Event1.webp", "title" => "Digital Health Conferences 2023", "class" => "section-1", "filter" => "filter-dhi", "column" => 1],
    ["src" => "../images/pages/gallery/DHI-Event4.webp", "title" => "Digital Health Conferences 2023", "class" => "section-2", "filter" => "filter-dhi", "column" => 1],
    ["src" => "../images/pages/gallery/DDIP-Event4.webp", "title" => "Drug Discovery Conferences 2024", "class" => "section-4", "filter" => "filter-ddip", "column" => 1],
    ["src" => "../images/pages/gallery/CTIP-Event1.webp", "title" => "Clinical Trials Conferences 2024", "class" => "section-2", "filter" => "filter-ctip", "column" => 1],
    ["src" => "../images/pages/gallery/CTIP-Event3.webp", "title" => "Clinical Trails Conferences 2024", "class" => "section-2", "filter" => "filter-ctip", "column" => 1],
    ["src" => "../images/pages/gallery/PSIP-Event4.webp", "title" => "Pharma Supply Chain Conferences 2024", "class" => "section-2", "filter" => "filter-psip", "column" => 1],
    ["src" => "../images/pages/gallery/PSIP-Event1.webp", "title" => "Pharma Supply Chain Conferences 2024", "class" => "section-2", "filter" => "filter-psip", "column" => 1],
    ["src" => "../images/pages/gallery/CTS-Event1.webp", "title" => "Clinical Trials Supply Conferences 2024", "class" => "section-2", "filter" => "filter-cts", "column" => 1],
    ["src" => "../images/pages/gallery/DRCC-Event4.webp", "title" => "Connected Card Conferences 2024", "class" => "section-1", "filter" => "filter-drcc", "column" => 1],
    ["src" => "../images/pages/gallery/BPC-Event2.webp", "title" => "Brand Protetion Conferences 2023", "class" => "section-2", "filter" => "filter-bpc", "column" => 1],
    ["src" => "../images/pages/gallery/CTS-Event3.webp", "title" => "Clinical Trial Supply Conferences 2024", "class" => "section-2", "filter" => "filter-cts", "column" => 1],
    // Column 2
    ["src" => "../images/pages/gallery/DHI-Event2.webp", "title" => "Digital Health Conferences 2023", "class" => "section-2", "filter" => "filter-dhi", "column" => 2],
    ["src" => "../images/pages/gallery/DDIP-Event2.webp", "title" => "Drug Discovery Conferences 2024", "class" => "section-4", "filter" => "filter-ddip", "column" => 2],
    ["src" => "../images/pages/gallery/DDIP-Event3.webp", "title" => "Drug Discovery Conferences 2023", "class" => "section-1", "filter" => "filter-ddip", "column" => 2],
    ["src" => "../images/pages/gallery/PPL-Event2.webp", "title" => "Pharma Packaging Conferences 2024", "class" => "section-2", "filter" => "filter-ppl", "column" => 2],
    ["src" => "../images/pages/gallery/PPL-Event4.webp", "title" => "Pharma Packaging Conferences 2024", "class" => "section-4", "filter" => "filter-ppl", "column" => 2],
    ["src" => "../images/pages/gallery/PPL-Event3.webp", "title" => "Pharma Packaging Conferences 2024", "class" => "section-1", "filter" => "filter-ppl", "column" => 2],
    ["src" => "../images/pages/gallery/BPC-Event4.webp", "title" => "Brand Protection Conferences 2024", "class" => "section-2", "filter" => "filter-bpc", "column" => 2],
    ["src" => "../images/pages/gallery/PSIP-Event2.webp", "title" => "Pharma Supply Chain Conferences 2024", "class" => "section-4", "filter" => "filter-psip", "column" => 2],
    ["src" => "../images/pages/gallery/BPC-Event1.webp", "title" => "Brand Protection Conferences 2023", "class" => "section-4", "filter" => "filter-bpc", "column" => 2],    
    ["src" => "../images/pages/gallery/DRCC-Event2.webp", "title" => "Connected Cars Conferences 2024", "class" => "section-4", "filter" => "filter-drcc", "column" => 2],
    // Column 3
    ["src" => "../images/pages/gallery/DHI-Event3.webp", "title" => "Digital Health Conferences 2023",   "class" => "section-1", "filter" => "filter-dhi", "column" => 3],
    ["src" => "../images/pages/gallery/DDIP-Event1.webp", "title" => "Drug Discovery Conferences 2024",  "class" => "section-4", "filter" => "filter-ddip", "column" => 3],
    ["src" => "../images/pages/gallery/CTIP-Event4.webp", "title" => "Clinical Trials Conferences 2024", "class" => "section-2", "filter" => "filter-ctip", "column" => 3],
    ["src" => "../images/pages/gallery/CTIP-Event2.webp", "title" => "Clinical Trials Conferences 2024", "class" => "section-4", "filter" => "filter-ctip", "column" => 3],
    ["src" => "../images/pages/gallery/PPL-Event1.webp", "title" => "Pharma Packaging Conferences 2024", "class" => "section-4", "filter" => "filter-ppl", "column" => 3],
    ["src" => "../images/pages/gallery/CTS-Event4.webp", "title" => "Clinical Trial Supply Conferences 2024", "class" => "section-4", "filter" => "filter-cts", "column" => 3],
    ["src" => "../images/pages/gallery/PSIP-Event3.webp", "title" => "Pharma Supply Chain Conferences 2024", "class" => "section-4", "filter" => "filter-psip", "column" => 3],
    ["src" => "../images/pages/gallery/CTS-Event2.webp", "title" => "Clinical Trial Supply Conferences 2024", "class" => "section-4", "filter" => "filter-cts", "column" => 3],
    ["src" => "../images/pages/gallery/DRCC-Event5.webp", "title" => "Connected Cars Conferences 2024", "class" => "section-4", "filter" => "filter-drcc", "column" => 3],
    ["src" => "../images/pages/gallery/BPC-Event3.webp", "title" => "Brand Protection Conferences 2024", "class" => "section-4", "filter" => "filter-bpc", "column" => 3],
    ["src" => "../images/pages/gallery/DRCC-Event1.webp", "title" => "Connected Cars Conferences 2024", "class" => "section-4", "filter" => "filter-drcc", "column" => 3],
];
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Template</title>
    
    <link rel="stylesheet" href="../vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../vendor/font-awesome/css/all.min.css" />
    <link rel="stylesheet" href="../style/style.css" />
    
    <style>
        .hero-section {
            height: 60vh;
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            position: relative;
            z-index: 1;
            padding-top: 190px;
            padding-bottom: 265px;
            /* display: flex;
            justify-content: center;
            align-items: center; */
        }
        .hero-section .hero-content .title{
            text-transform: capitalize;
            font-size: 6rem;
            padding-bottom: 10px;
        }
        .hero-section .hero-content .title-wrap .title::before{
            content: none;
        }
        
        @media (max-width: 330px){
            .hero-section .hero-content .title{
                font-size: 4rem;
            }
        }
        @media (max-width: 220px){
            .hero-section .hero-content .title{
                font-size: 3rem;
            }
        }
        .space-above{
            margin-top: 20px;
        }

    </style>
</head>
<body class="gallery-sections">
    
    <?php include "./include/gallery-header.php" ?>


    <section class="bg-img hero-section">
        <div class="container">
            <div class="hero-content text-center">
                <h2 class="title">Gallery</h2>
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                       <li class="breadcrumb-item"><a href="../index.php">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">Gallery</li>
                    </ol>
                </nav>
            </div>
          </div>
        </div>
    </section>

    <section class="gallery-section" style="margin-top: 45px;">
        <div class="container">
            <div id="buttons" style="margin-bottom: 20px;">
              <div id="portfolio-flters" class="filter-box buttons text-center" >
                  <button class="filter-data active" data-filter="all">All</button>
                  <button class="filter-data" data-filter="filter-ctip">Clinical Trials</button>
                  <button class="filter-data" data-filter="filter-ddip">Drug Discovery</button>
                  <button class="filter-data" data-filter="filter-cts">Clinical Trial Supply</button>
                  <button class="filter-data" data-filter="filter-ppl">Pharma Packaging</button>
                  <button class="filter-data" data-filter="filter-psip">Pharma Supply Chain</button>
                  <button class="filter-data" data-filter="filter-bpc">Brand Protection</button>
                  <button class="filter-data" data-filter="filter-drcc">Connected Cars</button>
                  <button class="filter-data" data-filter="filter-dht">Hotel Technology</button>
                  <button class="filter-data" data-filter="filter-dhi">Digital Health</button>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-6">
                    <?php foreach ($images as $index => $image): ?>
                        <?php if ($image['column'] == 1): ?>
                            <div class="portfolio-item <?= $image['filter'] ?> space-above" >
                                <div class="gallery-images-wrapp <?= $image['class'] ?> position-relative">
                                    <div class="image-gallery">
                                        <img src="<?= $image['src'] ?>" loading="lazy" alt="<?= $image['title'] ?>" class="hover-shadow img-fluid" onclick="openModal();currentSlide(<?= $index + 1 ?>)">
                                    </div>
                                    <div class="overlay">
                                        <div class="overlay-wrap">
                                            <button style="background-color: transparent;" onclick="openModal();currentSlide(<?= $index + 1 ?>)" class="gallery-plus image-popup">
                                                <span></span>
                                            </button>
                                            <h4 class="gallery-title"><a><?= $image['title'] ?></a></h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <?php endif; ?>
                    <?php endforeach; ?>
                </div>
                <div class="col-lg-4 col-md-6">
                    <?php foreach ($images as $index => $image): ?>
                        <?php if ($image['column'] == 2): ?>
                            <div class="portfolio-item <?= $image['filter'] ?> space-above" >
                                <div class="gallery-images-wrapp <?= $image['class'] ?> position-relative">
                                    <div class="image-gallery">
                                        <img src="<?= $image['src'] ?>" loading="lazy" alt="<?= $image['title'] ?>" class="hover-shadow img-fluid" onclick="openModal();currentSlide(<?= $index + 1 ?>)">
                                    </div>
                                    <div class="overlay">
                                        <div class="overlay-wrap">
                                            <button style="background-color: transparent;" onclick="openModal();currentSlide(<?= $index + 1 ?>)" class="gallery-plus image-popup">
                                                <span></span>
                                            </button>
                                            <h4 class="gallery-title"><a><?= $image['title'] ?></a></h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <?php endif; ?>
                    <?php endforeach; ?>
                </div>
                <div class="col-lg-4 col-md-6">
                    <?php foreach ($images as $index => $image): ?>
                        <?php if ($image['column'] == 3): ?>
                            <div class="portfolio-item <?= $image['filter'] ?> space-above" >
                                <div class="gallery-images-wrapp <?= $image['class'] ?> position-relative">
                                    <div class="image-gallery">
                                        <img src="<?= $image['src'] ?>" loading="lazy" alt="<?= $image['title'] ?>" class="hover-shadow img-fluid" onclick="openModal();currentSlide(<?= $index + 1 ?>)">
                                    </div>
                                    <div class="overlay">
                                        <div class="overlay-wrap">
                                            <button style="background-color: transparent;" onclick="openModal();currentSlide(<?= $index + 1 ?>)" class="gallery-plus image-popup">
                                                <span></span>
                                            </button>
                                            <h4 class="gallery-title"><a><?= $image['title'] ?></a></h4>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <?php endif; ?>
                    <?php endforeach; ?>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Lightbox Modal -->
    <div id="myModal" class="modal">
        <span class="close cursor" onclick="closeModal()">&times;</span>
        <div class="modal-content" style="background: transparent;">
            <?php foreach ($images as $index => $image) : ?>
                <div class="mySlides text-center">
                    <div class="numbertext"><?= $index + 1 ?> / <?= count($images) ?></div>
                    <img src="<?= $image['src'] ?>" style="width:80%; height: 33rem;">
                </div>
            <?php endforeach; ?>
            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
    </div>

    <?php include "./include/gallery-footer.php" ?>

    <div class="progress-wrap active-progress">
        <!-- <i class="fas fa-sharp fa-light fa-arrow-up"></i> -->
        <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
      <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" style="
            transition: stroke-dashoffset 10ms linear 0s;
            stroke-dasharray: 307.919, 307.919;
            stroke-dashoffset: 9.98604;
          "></path>
        </svg>
    </div>

    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script  src="../js/jquery-1.12.4.min.js"></script>
    <script  src="../js/backToTop.js"></script>
    <!-- Filter Script-->
    <script>
        // Function to handle the filter based on URL hash
        function applyFilterFromHash() {
            const hash = window.location.hash.substring(1); // Remove the '#'
            const filterClass = hash ? `filter-${hash}` : 'all';

            const filterButtons = document.querySelectorAll('.filter-data');
            filterButtons.forEach(button => {
                if (button.dataset.filter === filterClass) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });

            const portfolioItems = document.querySelectorAll('.portfolio-item');
            portfolioItems.forEach(item => {
                if (filterClass === 'all' || item.classList.contains(filterClass)) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        // Function to update the URL hash when a filter button is clicked
        function updateHashOnClick() {
            const filterButtons = document.querySelectorAll('.filter-data');
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const filter = button.dataset.filter === 'all' ? '' : button.dataset.filter.replace('filter-', '');
                    window.location.hash = filter;
                });
            });
        }

        // Apply filter on page load based on URL hash
        window.addEventListener('load', () => {
            applyFilterFromHash();
            updateHashOnClick();
        });

        // Apply filter when hash changes
        window.addEventListener('hashchange', applyFilterFromHash);
    </script>
    <script>
        function openModal() {
            document.getElementById("myModal").style.display = "block";
        }

        function closeModal() {
            document.getElementById("myModal").style.display = "none";
        }

        var slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            var i;
            var slides = document.getElementsByClassName("mySlides");
            if (n > slides.length) { slideIndex = 1 }
            if (n < 1) { slideIndex = slides.length }
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slides[slideIndex - 1].style.display = "block";
        }
    </script>
</body>
</html>
